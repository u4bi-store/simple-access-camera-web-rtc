<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>web rtc</title>
        
        <style>
        </style>
    </head>
    <body>

        <video id="cam"></video>


        <script>

            var video;

            
            /*  UserMedia 가져오기
                클라이언트의 브라우저에서 사용 가능한지 판별 */
            navigator.getMedia = ( 
                navigator.getUserMedia ||
                navigator.webkitGetUserMedia ||
                navigator.mozGetUserMedia
            );

            if(navigator.getMedia) console.log('지원되는 브라우저');

            /*  메서드 호출하여 콜백 받기
                getUserMedia (스트림 옵션, 연결 성공, 연결 오류) */
            navigator.getMedia({
                video : {

                    /*  getUserMedia 비디오 옵션 알아보기
                        https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia 
                    */
                    width: 800 , // 카메라 해상도 설정 
                    height: 600 ,
                    /* 최소 해상도 설정 */
                    // width : {
                    //     min : 1800
                    // },
                    frameRate: { // 프레임 속도
                        ideal : 10,
                        max : 15
                    }
                    /* 전면 및 후면 카메라 */
                    // , facingMode: 'user'
                    // , facingMode: 'environment'
                },
                audio : true
            }, success, function(e){
                console.log('err ', e);

            });


            function success(e){
                // console.log('success ', e);

                /*  비디오 스트림하기
                    비디오 DOM의 소스를 스트림으로 설정
                    */
                video = document.getElementById ('cam');
                video.src = window.URL.createObjectURL(e);
                video.play();


            };
            
        </script>
    </body>
</html>